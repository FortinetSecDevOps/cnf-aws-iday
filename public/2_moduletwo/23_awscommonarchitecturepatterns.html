<!DOCTYPE html>
<html lang="en" class="js csstransforms3d">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="Hugo 0.86.0" />
    <meta name="description" content="FortiGate CNF Workshop">
<meta name="author" content="Hiruy Aberra">

    <link rel="icon" href="https://awsmedia.s3.amazonaws.com/favicon.ico" type="image/x-icon" />

    <title>AWS Common Architecture Patterns :: English</title>

    
    <link href="/css/nucleus.css?1675961207" rel="stylesheet">
    <link href="/css/fontawesome-all.min.css?1675961207" rel="stylesheet">
    <link href="/css/hybrid.css?1675961207" rel="stylesheet">
    <link href="/css/featherlight.min.css?1675961207" rel="stylesheet">
    <link href="/css/perfect-scrollbar.min.css?1675961207" rel="stylesheet">
    <link href="/css/auto-complete.css?1675961207" rel="stylesheet">
    <link href="/css/atom-one-dark-reasonable.css?1675961207" rel="stylesheet">
    <link href="/css/theme.css?1675961207" rel="stylesheet">
    <link href="/css/hugo-theme.css?1675961207" rel="stylesheet">
    
    <link href="/css/theme-mine.css?1675961207" rel="stylesheet">
    
    

    <script src="/js/jquery-3.3.1.min.js?1675961207"></script>

    <style>
      :root #header + #content > #left > #rlblock_left{
          display:none !important;
      }
      
    </style>
    
  </head>
  <body class="" data-url="/2_moduletwo/23_awscommonarchitecturepatterns.html">
    <nav id="sidebar" class="showVisitedLinks">



  <div id="header-wrapper">
    <div id="header">
      <a href="/" title="Go home"><img style="vertical-align:middle;margin:30px;" src="../../images/AWS-Logo_White-Color.png" height="125px">

    </div>
    
        <div class="searchbox">
    <label for="search-by"><i class="fas fa-search"></i></label>
    <input data-search-input id="search-by" type="search" placeholder="Search...">
    <span data-search-clear=""><i class="fas fa-times"></i></span>
</div>

<script type="text/javascript" src="/js/lunr.min.js?1675961207"></script>
<script type="text/javascript" src="/js/auto-complete.js?1675961207"></script>
<script type="text/javascript">
    
        var baseurl = "\/";
    
</script>
<script type="text/javascript" src="/js/search.js?1675961207"></script>

    
  </div>
  
    <section id="homelinks">
      <ul>
        <li>
            <a class="padding" href='/'><i class='fas fa-home'></i> Home</a>
        </li>
      </ul>
    </section>
  

    <div class="highlightable">
    <ul class="topics">

        
          
          




 
  
    
    <li data-nav-id="/1_moduleone.html" title="Introduction" class="dd-item
        
        
        
        ">
      <a href="/1_moduleone.html">
          Introduction
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/2_moduletwo.html" title="Workshop Prerequisites" class="dd-item
        parent
        
        
        ">
      <a href="/2_moduletwo.html">
          Workshop Prerequisites
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/2_moduletwo/21_logistics.html" title="Workshop Logistics" class="dd-item ">
        <a href="/2_moduletwo/21_logistics.html">
        Workshop Logistics
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/2_moduletwo/22_awsnetworkingconcepts.html" title="AWS Networking Concepts" class="dd-item ">
        <a href="/2_moduletwo/22_awsnetworkingconcepts.html">
        AWS Networking Concepts
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/2_moduletwo/23_awscommonarchitecturepatterns.html" title="AWS Common Architecture Patterns" class="dd-item active">
        <a href="/2_moduletwo/23_awscommonarchitecturepatterns.html">
        AWS Common Architecture Patterns
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/2_moduletwo/24_fortigatecnfterminology.html" title="FortiGate CNF Terminology" class="dd-item ">
        <a href="/2_moduletwo/24_fortigatecnfterminology.html">
        FortiGate CNF Terminology
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/3_modulethree.html" title="Workshop Hands On" class="dd-item
        
        
        
        ">
      <a href="/3_modulethree.html">
          Workshop Hands On
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/3_modulethree/31_task1.html" title="Task 1: Subscribe to FortiGate CNF in AWS Marketplace" class="dd-item ">
        <a href="/3_modulethree/31_task1.html">
        Task 1: Subscribe to FortiGate CNF in AWS Marketplace
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/3_modulethree/32_task2.html" title="Task 2: Onboard an AWS account to FortiGate CNF" class="dd-item ">
        <a href="/3_modulethree/32_task2.html">
        Task 2: Onboard an AWS account to FortiGate CNF
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/3_modulethree/33_task3.html" title="Task 3: Deploying CNF Instances and GWLBe endpoints" class="dd-item ">
        <a href="/3_modulethree/33_task3.html">
        Task 3: Deploying CNF Instances and GWLBe endpoints
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/3_modulethree/34_task4.html" title="Task 4: Create a policy set and apply it to a FortiGate CNF Instance" class="dd-item ">
        <a href="/3_modulethree/34_task4.html">
        Task 4: Create a policy set and apply it to a FortiGate CNF Instance
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/4_modulefour.html" title="Workshop Test Traffic" class="dd-item
        
        
        
        ">
      <a href="/4_modulefour.html">
          Workshop Test Traffic
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/4_modulefour/41_distributedingress.html" title="Distributed Ingress" class="dd-item ">
        <a href="/4_modulefour/41_distributedingress.html">
        Distributed Ingress
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/4_modulefour/42_distributedegress.html" title="Distributed Egress" class="dd-item ">
        <a href="/4_modulefour/42_distributedegress.html">
        Distributed Egress
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/4_modulefour/43_centralizedegress.html" title="Centralized Egress" class="dd-item ">
        <a href="/4_modulefour/43_centralizedegress.html">
        Centralized Egress
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/4_modulefour/44_centralizedeastwest.html" title="Centralized East West" class="dd-item ">
        <a href="/4_modulefour/44_centralizedeastwest.html">
        Centralized East West
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/5_modulefive.html" title="Providing Feedback" class="dd-item
        
        
        
        ">
      <a href="/5_modulefive.html">
          Providing Feedback
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
    </li>
  
 

          
        
    </ul>

    
    
      <section id="shortcuts">
        <h3>More</h3>
        <ul>
          
              <li>
                  <a class="padding" href="https://fortinet.com/aws"><i class='far fa-lightbulb'></i> Fortinet's AWS Microsite</a>
              </li>
          
              <li>
                  <a class="padding" href="https://aws.amazon.com/marketplace/search/results?searchTerms=fortinet"><i class='fas fa-tools'></i> AWS MP Listings for Fortinet</a>
              </li>
          
              <li>
                  <a class="padding" href="https://docs.fortinet.com/cloud-solutions/aws"><i class='far fa-lightbulb'></i> Fortinet in AWS Docs</a>
              </li>
          
              <li>
                  <a class="padding" href="https://docs.fortinet.com/product/fortigate-cnf"><i class='fas fa-chalkboard-teacher'></i> FortiGate CNF Docs</a>
              </li>
          
        </ul>
      </section>
    

    
    <section id="prefooter">
      <hr/>
      <ul>
      

      
        <li><a class="padding" href="#" data-clear-history-toggle=""><i class="fas fa-history fa-fw"></i> Clear History</a></li>
      
      </ul>
    </section>
    
    <section id="footer">
      <left>

    <a href="https://aws.amazon.com/privacy/?nc1=f_pr">Privacy</a> | <a
        href="https://aws.amazon.com/terms/?nc1=f_pr">Site Terms</a> | <a
        href="https://modernization-workshop-bucket.s3-us-west-2.amazonaws.com/license/cc-license.html">CC BY-SA 4.0</a>

</left>
    </section>
  </div>
</nav>




        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable">
              
              <div>
                <div id="top-bar">
                
                
                <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                    <span id="sidebar-toggle-span">
                        <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                          <i class="fas fa-bars"></i>
                        </a>
                    </span>
                  
                  <span class="links">
                 
                 
                    
          
          
            
            
          
          
            
            
          
          
            <a href='/'>Secure AWS workloads with FortiGate CNF SaaS</a> > <a href='/2_moduletwo.html'>Workshop Prerequisites</a> > AWS Common Architecture Patterns
          
        
          
        
          
        
                 
                  </span>
                </div>
                
              </div>
            </div>
            
        <div id="head-tags">
        
        </div>
        
          <div id="chapter">
        
        <div id="body-inner">
          

        




<h1 id="aws-common-architecture-patterns">AWS Common Architecture Patterns</h1>

<p>While there are many ways to organize your infrastructure there are two main ways to design your networking when using GWLB, centralized and distributed. From the perspective of networking, routing, and GWLBe placement.  We will discuss this further below.</p>

<p>FortiGate CNF is a SaaS offering that on the backend uses FortiGates, AWS GWLB, and GWLB endpoints to intercept customer traffic and inspect this transparently. As part of the deployment process for FortiGate CNF instances, the customer environment will need to implement VPC and ingress routing at the IGW to intercept the traffic to be inspected.</p>

<p>The FortiGate CNF security stack which includes the AWS GWLB and other components will deployed in Fortinet managed AWS accounts. The details of the diagram are simply an example of the main components used in FortiGate CNF. This is more to understand what happens when customer traffic is received at our GWLB.</p>

<p><img src="../images/image-cap-1.png" alt="" /></p>

<p>Decentralized designs do not require any routing between the protected VPC and another VPC through TGW. These designs allow simple service insertion with minimal routing changes to the VPC route table. The <strong>yellow numbers</strong> show the initial packet flow for a session and how it is routed (using ingress and VPC routes) to the GWLBe endpoint which then sends traffic to the FortiGate CNF stack. The <strong>blue numbers</strong> show the returned traffic after inspection by the FortiGate CNF stack.</p>

<p><strong>Note:</strong> Any subnet where the GWLBe for the FortiGate CNF instance is to be deployed will need to have a specific tag name and value to be seen in the FortiGate CNF portal.  Currently this is the tag name &lsquo;<strong>fortigatecnf_subnet_type</strong>&rsquo; and tag value &lsquo;<strong>endpoint</strong>&rsquo;.</p>

<p><img src="../images/image-cap-2.png" alt="" /></p>

<p><img src="../images/image-cap-3.png" alt="" /></p>

<p><img src="../images/image-cap-4.png" alt="" /></p>

<p><img src="../images/image-cap-5.png" alt="" /></p>

<p>Centralized designs require the use of TGW to provide a simple hub and spoke architecture to inspect traffic. These can simplify east-west and egress traffic inspection needs while removing the need for IGWs and NAT Gateways to be deployed in each protected VPC for egress inspection. You can still mix a decentralized architecture to inspect ingress and even egress traffic while leveraging the centralized design for all east-west inspection.</p>

<p>The <strong>yellow numbers</strong> show the initial packet flow for a session and how it is routed (using ingress, VPC routes, and TGW routes) to the GWLBe which then sends traffic to the FortiGate CNF stack. The <strong>blue numbers (east-west)</strong> and <strong>purple numbers (egress)</strong> show the returned traffic after inspection by the FortiGate CNF stack.</p>

<p><img src="../images/image-cap-6.png" alt="" /></p>

<p><img src="../images/image-cap-7.png" alt="" /></p>

<p><img src="../images/image-cap-8.png" alt="" /></p>

<p>For more examples of distributed and centralized models, please reference the examples on the <a href="https://docs.fortinet.com/document/fortigate-cnf/latest/administration-guide/325439/deployment-scenarios" target="_blank"><strong>FortiGate CNF Admin Guide</strong></a>.</p>


<footer class="footline">
	
</footer>

        
            </div> 
        
        </div>
        

      </div>

    <div id="navigation">
        
        

        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        

        


	 
	 
		
			<a class="nav nav-prev" href="/2_moduletwo/22_awsnetworkingconcepts.html" title="AWS Networking Concepts"> <i class="fa fa-chevron-left"></i></a>
		
		
			<a class="nav nav-next" href="/2_moduletwo/24_fortigatecnfterminology.html" title="FortiGate CNF Terminology" style="margin-right: 0px;"><i class="fa fa-chevron-right"></i></a>
		
	
    </div>

    </section>

    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="/js/clipboard.min.js?1675961207"></script>
    <script src="/js/perfect-scrollbar.min.js?1675961207"></script>
    <script src="/js/perfect-scrollbar.jquery.min.js?1675961207"></script>
    <script src="/js/jquery.sticky.js?1675961207"></script>
    <script src="/js/featherlight.min.js?1675961207"></script>
    <script src="/js/highlight.pack.js?1675961207"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="/js/modernizr.custom-3.6.0.js?1675961207"></script>
    <script src="/js/learn.js?1675961207"></script>
    <script src="/js/hugo-learn.js?1675961207"></script>
    
        
            <script src="/mermaid/mermaid.js?1675961207"></script>
        
        <script>
            mermaid.initialize({ startOnLoad: true });
        </script>
    
    

  </body>
</html>

